<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f1f5f9;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .card h2 {
      margin-top: 0;
      font-size: 18px;
      margin-bottom: 12px;
    }
    .produk-item {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
      font-size: 15px;
    }
    .produk-item:last-child {
      border-bottom: none;
    }
    .total {
      text-align: right;
      font-weight: bold;
      margin-top: 10px;
      font-size: 16px;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
    }
    label {
      font-weight: bold;
      font-size: 14px;
    }
    .hidden {
      display: none;
    }
    .pay-options {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    .pay-options button {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      cursor: pointer;
      font-weight: bold;
      background: #e2e8f0;
      color: #333;
    }
    .pay-options button.active {
      background: navy;
      color: white;
    }
    button#pesanBtn {
      width: 100%;
      padding: 12px;
      background: navy;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      font-weight: bold;
    }
    button#pesanBtn:hover {
      background: #001f54;
    }
  </style>
</head>
<body>

  <h1>Checkout</h1>

  <!-- Daftar Produk -->
  <div class="card" id="produkCard">
    <h2>Daftar Produk</h2>
    <div id="produkList"></div>
    <div class="total" id="totalHarga">Total: Rp 0</div>
  </div>

  <!-- Data Pembeli -->
  <div class="card">
    <h2>Data Pembeli</h2>
    <label>Nama</label>
    <input type="text" id="nama" placeholder="Nama lengkap">
    <label>Nomor WhatsApp</label>
    <input type="text" id="wa" placeholder="08xxxxxxxxxx">
    <label>Alamat</label>
    <textarea id="alamat" rows="3" placeholder="Alamat lengkap"></textarea>
  </div>

  <!-- Metode Pembayaran -->
  <div class="card">
    <h2>Metode Pembayaran</h2>
    <div class="pay-options">
      <button type="button" id="btnCash">Cash</button>
      <button type="button" id="btnTransfer">Transfer</button>
    </div>

    <!-- Cash -->
    <div id="cashForm" class="hidden">
      <label>Catatan</label>
      <textarea id="catatanCash" rows="3" placeholder="Contoh: Uang pas, jangan pedas, dll."></textarea>
    </div>

    <!-- Transfer -->
    <div id="transferForm" class="hidden">
      <p>Kirim ke GoPay <b>087123567896 (Kevin)</b></p>
      <label>Upload Bukti Pembayaran</label>
      <input type="file" id="bukti">
      <label>Catatan</label>
      <textarea id="catatanTransfer" rows="3" placeholder="Contoh: Kirim cepat, tanpa sedotan, dll."></textarea>
    </div>
  </div>

  <!-- Tombol Pesan -->
  <button id="pesanBtn">Pesan Sekarang</button>

  <script>
    // Ambil cart dari localStorage
    const cart = JSON.parse(localStorage.getItem("cart")) || {};
    const produkList = document.getElementById("produkList");
    const totalHarga = document.getElementById("totalHarga");

    const products = [
      {id:1,name:'Mochi',price:10000},
      {id:2,name:'Telur Gulung',price:5000},
      {id:3,name:'Mie Ayam',price:12000},
      {id:4,name:'Cimol unsika',price:5000},
      {id:5,name:'Kentang Goreng Unsika',price:5000},
      {id:6,name:'Es Kelapa',price:6000},
      {id:7,name:'Es teh tali pinggir',price:5000},
      {id:8,name:'Jus Alpukat',price:12000},
      {id:9,name:'Jus Kelengkeng',price:10000},
      {id:10,name:'Jus Rambutan',price:10000}
    ];

    function formatRp(n){
      return 'Rp ' + n.toLocaleString('id-ID');
    }

    // Render daftar produk di keranjang
    let total = 0;
    for(const id in cart){
      const qty = cart[id];
      const produk = products.find(p => p.id == id);
      if(produk){
        const subtotal = produk.price * qty;
        total += subtotal;
        const item = document.createElement("div");
        item.className = "produk-item";
        item.innerHTML = `
          <span>${produk.name} x ${qty}</span>
          <span>${formatRp(subtotal)}</span>
        `;
        produkList.appendChild(item);
      }
    }
    totalHarga.textContent = "Total: " + formatRp(total);

    // Toggle pembayaran pakai tombol
    const btnCash = document.getElementById("btnCash");
    const btnTransfer = document.getElementById("btnTransfer");
    const cashForm = document.getElementById("cashForm");
    const transferForm = document.getElementById("transferForm");

    btnCash.addEventListener("click", ()=>{
      btnCash.classList.add("active");
      btnTransfer.classList.remove("active");
      cashForm.classList.remove("hidden");
      transferForm.classList.add("hidden");
    });

    btnTransfer.addEventListener("click", ()=>{
      btnTransfer.classList.add("active");
      btnCash.classList.remove("active");
      transferForm.classList.remove("hidden");
      cashForm.classList.add("hidden");
    });

    // Tombol pesan
    document.getElementById("pesanBtn").addEventListener("click", ()=>{
      alert("Pesanan berhasil dikirim!");
      localStorage.removeItem("cart");
      window.location.href = "index.html";
    });
  </script>

</body>
</html>
