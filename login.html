<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login</title>
  <style>
    :root{--bg:rgb(122, 85, 255);--card:#fff3f3;--accent:#2563eb;--muted:#6b7280}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#eef2ff 0%,var(--bg) 100%);display:flex;align-items:center;justify-content:center;padding:32px}
    .card{width:100%;max-width:400px;background:var(--card);border-radius:12px;box-shadow:0 6px 22px rgba(37,99,235,0.08);padding:22px}
    h1{margin:0 0 16px;font-size:22px}
    .field{margin-bottom:12px}
    label{display:block;font-size:13px;margin-bottom:6px;color:#111827}
    input[type=tel],input[type=password]{width:100%;padding:10px 12px;border:1px solid #e6e9ef;border-radius:8px;font-size:14px}
    .btn{display:inline-block;width:100%;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600;cursor:pointer;margin-top:12px}
    .msg{margin:12px 0;padding:10px;border-radius:8px;font-size:13px}
    .msg.success{background:#090909;color:#065f46}
    .msg.error{background:#fff1f2;color:#991b1b}
    .muted{font-size:13px;color:var(--muted);margin-top:12px;text-align:center}
  </style>
</head>
<body>
  <main class="card">
    <h1>Login</h1>
    <form id="loginForm" autocomplete="off">
      <div class="field">
        <label for="wa">Nomor WA</label>
        <input id="wa" name="wa" type="tel" placeholder="Nomor WA terdaftar" required />
      </div>

      <div class="field">
        <label for="password">Password</label>
        <input id="password" name="password" type="password" placeholder="Password" required />
      </div>

      <button type="submit" class="btn">Login</button>
    </form>

    <div id="message"></div>

    <div class="muted">Belum punya akun? <a href="register.html">Register</a></div>
  </main>

  <script>
    const KEY = 'users';
    localStorage.removeItem("loggedInUser");
    function readUsers(){
      try {
        return JSON.parse(localStorage.getItem(KEY) || '[]');
      } catch(e){ return []; }
    }

    const form = document.getElementById('loginForm');
    const msgEl = document.getElementById('message');

    function showMessage(text,type='success'){
      msgEl.innerHTML = `<div class="msg ${type==='success'? 'success':'error'}">${text}</div>`;
    }

    form.addEventListener('submit', e =>{
      e.preventDefault();
      const wa = form.wa.value.trim();
      const password = form.password.value;

      const users = readUsers();
      const found = users.find(u=>u.wa === wa && u.password === password);

      if(!found){
        showMessage('Nomor WA atau password salah','error');
        return;
      }

    // ✅ Simpan data user penuh ke localStorage
    localStorage.setItem("loggedInUser", JSON.stringify(found));

    showMessage('Login berhasil ✅, mengarahkan...','success');
    setTimeout(()=>{ window.location.href = 'index.html'; }, 1200);
    });
  </script>
</body>
</html>
